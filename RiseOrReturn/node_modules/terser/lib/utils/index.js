"use strict";function characters(n){return n.split("")}function member(n,e){return e.includes(n)}class DefaultsError extends Error{constructor(n,e){super(),this.name="DefaultsError",this.message=n,this.defs=e}}function defaults(n,e,t){!0===n?n={}:null!=n&&"object"==typeof n&&(n={...n});const r=n||{};if(t)for(const n in r)if(HOP(r,n)&&!HOP(e,n))throw new DefaultsError("`"+n+"` is not a supported option",e);for(const t in e)if(HOP(e,t))if(n&&HOP(n,t))if("ecma"===t){let e=0|n[t];e>5&&e<2015&&(e+=2009),r[t]=e}else r[t]=n&&HOP(n,t)?n[t]:e[t];else r[t]=e[t];return r}function noop(){}function return_false(){return!1}function return_true(){return!0}function return_this(){return this}function return_null(){return null}var MAP=function(){function n(n,u,s){var i,a=[],c=[];function f(){var f=u(n[i],i),l=f instanceof o;return l&&(f=f.v),f instanceof t?(f=f.v)instanceof r?c.push.apply(c,s?f.v.slice().reverse():f.v):c.push(f):f!==e&&(f instanceof r?a.push.apply(a,s?f.v.slice().reverse():f.v):a.push(f)),l}if(Array.isArray(n))if(s){for(i=n.length;--i>=0&&!f(););a.reverse(),c.reverse()}else for(i=0;i<n.length&&!f();++i);else for(i in n)if(HOP(n,i)&&f())break;return c.concat(a)}n.at_top=function(n){return new t(n)},n.splice=function(n){return new r(n)},n.last=function(n){return new o(n)};var e=n.skip={};function t(n){this.v=n}function r(n){this.v=n}function o(n){this.v=n}return n}();function make_node(n,e,t){return t||(t={}),e&&(t.start||(t.start=e.start),t.end||(t.end=e.end)),new n(t)}function push_uniq(n,e){n.includes(e)||n.push(e)}function string_template(n,e){return n.replace(/{(.+?)}/g,(function(n,t){return e&&e[t]}))}function remove(n,e){for(var t=n.length;--t>=0;)n[t]===e&&n.splice(t,1)}function mergeSort(n,e){if(n.length<2)return n.slice();return function n(t){if(t.length<=1)return t;var r=Math.floor(t.length/2),o=t.slice(0,r),u=t.slice(r);return function(n,t){for(var r=[],o=0,u=0,s=0;o<n.length&&u<t.length;)e(n[o],t[u])<=0?r[s++]=n[o++]:r[s++]=t[u++];return o<n.length&&r.push.apply(r,n.slice(o)),u<t.length&&r.push.apply(r,t.slice(u)),r}(o=n(o),u=n(u))}(n)}function makePredicate(n){return Array.isArray(n)||(n=n.split(" ")),new Set(n.sort())}function map_add(n,e,t){n.has(e)?n.get(e).push(t):n.set(e,[t])}function map_from_object(n){var e=new Map;for(var t in n)HOP(n,t)&&"$"===t.charAt(0)&&e.set(t.substr(1),n[t]);return e}function map_to_object(n){var e=Object.create(null);return n.forEach((function(n,t){e["$"+t]=n})),e}function HOP(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function keep_name(n,e){return!0===n||n instanceof RegExp&&n.test(e)}var lineTerminatorEscape={"\0":"0","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function regexp_source_fix(n){return n.replace(/[\0\n\r\u2028\u2029]/g,(function(e,t){return("\\"==n[t-1]&&("\\"!=n[t-2]||/(?:^|[^\\])(?:\\{2})*$/.test(n.slice(0,t-1)))?"":"\\")+lineTerminatorEscape[e]}))}const all_flags="gimuy";function sort_regexp_flags(n){const e=new Set(n.split(""));let t="";for(const n of"gimuy")e.has(n)&&(t+=n,e.delete(n));return e.size&&e.forEach((n=>{t+=n})),t}function has_annotation(n,e){return n._annotations&e}function set_annotation(n,e){n._annotations|=e}export{characters,defaults,HOP,keep_name,make_node,makePredicate,map_add,map_from_object,map_to_object,MAP,member,mergeSort,noop,push_uniq,regexp_source_fix,remove,return_false,return_null,return_this,return_true,sort_regexp_flags,string_template,has_annotation,set_annotation};