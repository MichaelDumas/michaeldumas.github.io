import Animation from"../../../../lib/Animation.js";import State from"../../../../lib/State.js";import Player from"../../../entities/Player.js";import Direction from"../../../enums/Direction.js";import EquipementName from"../../../enums/EquipementName.js";import PlayerStateName from"../../../enums/PlayerStateName.js";import{keys}from"../../../globals.js";import Room from"../../../objects/Room.js";export default class PlayerWalkingState extends State{constructor(e){super(),this.player=e,this.animation={[Direction.Up]:new Animation([16,17,18,19,20,21,22,23],.075),[Direction.Down]:new Animation([0,1,2,3,4,5,6,7],.075),[Direction.Left]:new Animation([24,25,26,27,28,29,30,31],.075),[Direction.Right]:new Animation([8,9,10,11,12,13,14,15],.075)}}enter(){this.player.currentAnimation.refresh(),this.player.sprites=this.player.walkingSprites,this.player.currentAnimation=this.animation[this.player.direction]}update(e){this.player.roomShifting||(this.handleMovement(e),this.handleSwordSwing())}handleMovement(e){this.player.currentAnimation=this.animation[this.player.direction],keys.s?(this.player.direction=Direction.Down,this.player.position.y+=this.player.speed*e,this.player.hitbox.position.y+this.player.hitbox.dimensions.y>=Room.BOTTOM_EDGE&&(this.player.position.y=Player.BOUNDARY_DOWN)):keys.d?(this.player.direction=Direction.Right,this.player.position.x+=this.player.speed*e,this.player.hitbox.position.x+this.player.hitbox.dimensions.x>=Room.RIGHT_EDGE&&(this.player.position.x=Player.BOUNDARY_RIGHT)):keys.w?(this.player.direction=Direction.Up,this.player.position.y-=this.player.speed*e,this.player.hitbox.position.y<=Room.TOP_EDGE&&(this.player.position.y=Player.BOUNDARY_UP)):keys.a?(this.player.direction=Direction.Left,this.player.position.x-=this.player.speed*e,this.player.hitbox.position.x<=Room.LEFT_EDGE&&(this.player.position.x=Player.BOUNDARY_LEFT)):this.player.changeState(PlayerStateName.Idle)}handleSwordSwing(){if(keys[" "]&&this.player.changeState(PlayerStateName.SwordSwinging),keys.Enter&&(keys.Enter=!1,1==this.player.equipment.usable))switch(this.player.equipment.type){case EquipementName.FlashBoots:this.player.useFlashBoots();break;case EquipementName.MerlinPotion:this.player.useMerlinPotion();break;case EquipementName.DiamondChestPlate:this.player.useChestPlate()}}}