import State from"../../../lib/State.js";import{CANVAS_HEIGHT,CANVAS_WIDTH,context,stateMachine,timer}from"../../globals.js";export default class TransitionState extends State{constructor(){super(),this.transitionAlpha=0,this.currentState=null}enter(t){this.fromState=t.fromState,this.toState=t.toState,this.level=t.level,this.dungeon=t.dungeon,this.player=t.player,this.didReturn=t.didReturn,this.toStateEnterParameters={fromState:this.fromState,toState:this.toState,level:this.level,equipment:t.equipment,dungeon:this.dungeon,didReturn:this.didReturn},this.currentState=this.fromState,this.transitionAlpha=0,this.fadeOut()}update(t){timer.update(t)}render(){this.currentState.render(),context.fillStyle=`rgb(0, 0, 0, ${this.transitionAlpha})`,context.fillRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT)}fadeOut(){timer.tween(this,["transitionAlpha"],[1],1.5,(()=>{this.currentState=this.toState,this.currentState.enter(this.toStateEnterParameters),this.fadeIn()}))}fadeIn(){timer.tween(this,["transitionAlpha"],[0],1.5,(()=>{stateMachine.currentState=this.currentState}))}}