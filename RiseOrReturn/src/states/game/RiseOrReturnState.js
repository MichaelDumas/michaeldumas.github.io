import State from"../../../lib/State.js";import GameStateName from"../../enums/GameStateName.js";import ImageName from"../../enums/ImageName.js";import SoundName from"../../enums/SoundName.js";import{CANVAS_HEIGHT,CANVAS_WIDTH,context,images,keys,sounds,stateMachine,timer}from"../../globals.js";export default class RiseOrReturnState extends State{static MAX_MENU_SELECT=1;static RISE_SELECT=0;static RETURN_SELECT=1;constructor(){super(),this.selected=0}enter(e){sounds.stop(SoundName.MainTheme),sounds.play(SoundName.RiseReturn),this.level=e.level,this.dungeon=e.dungeon}exit(){sounds.stop(SoundName.MainTheme),sounds.stop(SoundName.RiseReturn)}update(e){if(timer.update(e),keys.Enter)switch(keys.Enter=!1,sounds.play(SoundName.Select),this.selected){case 0:stateMachine.change(GameStateName.Transition,{fromState:this,toState:stateMachine.states[GameStateName.Play],level:this.level,dungeon:this.dungeon});break;case 1:stateMachine.change(GameStateName.Transition,{fromState:this,toState:stateMachine.states[GameStateName.GameOver],level:this.level,didReturn:!0})}keys.a&&(0==this.selected?this.selected=RiseOrReturnState.MAX_MENU_SELECT:this.selected--,keys.a=!1,sounds.stop(SoundName.Change),sounds.play(SoundName.Change)),keys.d&&(this.selected==RiseOrReturnState.MAX_MENU_SELECT?this.selected=0:this.selected++,keys.d=!1,sounds.stop(SoundName.Change),sounds.play(SoundName.Change))}render(){context.save(),context.font="50px Zelda",context.fillStyle="white",context.textBaseline="middle",context.textAlign="center",context.fillText("Rise or Return",CANVAS_WIDTH/2,CANVAS_HEIGHT/3),context.font="30px Zelda",context.fillStyle=this.selected===RiseOrReturnState.RISE_SELECT?"red":"white",context.fillText("Rise",CANVAS_WIDTH/4,.75*CANVAS_HEIGHT),context.fillStyle=this.selected===RiseOrReturnState.RETURN_SELECT?"red":"white",context.fillText("Return",.7*CANVAS_WIDTH,.75*CANVAS_HEIGHT),context.restore()}}