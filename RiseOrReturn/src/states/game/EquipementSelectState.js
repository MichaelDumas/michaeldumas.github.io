import State from"../../../lib/State.js";import SoundName from"../../enums/SoundName.js";import{keys,sounds,stateMachine,images,CANVAS_WIDTH,CANVAS_HEIGHT,context}from"../../globals.js";import GameStateName from"../../enums/GameStateName.js";import Equipement from"../../abilities/Equipement.js";import Sprite from"../../../lib/Sprite.js";import EquipementName from"../../enums/EquipementName.js";import ImageName from"../../enums/ImageName.js";export default class EquipementSelectState extends State{static ARROW_WIDTH=24;static ARROW_HEIGHT=24;static MAX_MENU_SELECT=2;constructor(){super(),this.equipement=new Equipement,this.sprites=EquipementSelectState.generateArrowSprites(),this.selected=0}enter(e){}update(e){keys.Enter&&(keys.Enter=!1,sounds.play(SoundName.Select),stateMachine.change(GameStateName.Transition,{fromState:this,toState:stateMachine.states[GameStateName.Play],equipment:this.equipement})),keys.a&&(keys.a=!1,0==this.selected?this.selected=EquipementSelectState.MAX_MENU_SELECT:this.selected--,this.equipement.type=this.selected,sounds.stop(SoundName.Change),sounds.play(SoundName.Change)),keys.d&&(keys.d=!1,this.selected==EquipementSelectState.MAX_MENU_SELECT?this.selected=0:this.selected++,this.equipement.type=this.selected,sounds.stop(SoundName.Change),sounds.play(SoundName.Change)),this.equipement.icon=Equipement.generateSprites(this.equipement.type)}render(){images.render(ImageName.Background,0,0,CANVAS_WIDTH,CANVAS_HEIGHT),this.equipement.render(CANVAS_WIDTH/2-35,CANVAS_HEIGHT/2-10,80,80),context.save(),this.sprites[0].render(.25*CANVAS_WIDTH-EquipementSelectState.ARROW_WIDTH/2,.85*CANVAS_HEIGHT-EquipementSelectState.ARROW_HEIGHT/2),context.globalAlpha=1,this.sprites[1].render(.75*CANVAS_WIDTH-EquipementSelectState.ARROW_WIDTH/2,.85*CANVAS_HEIGHT-EquipementSelectState.ARROW_HEIGHT/2),context.globalAlpha=1,context.fillStyle="white",context.font="20px Joystix",context.textAlign="center",context.fillText("Select your equipment with A and D",.5*CANVAS_WIDTH,.15*CANVAS_HEIGHT),context.restore()}static generateArrowSprites(){return Sprite.generateSpritesFromSpriteSheet(images.get(ImageName.Arrow),this.ARROW_WIDTH,this.ARROW_HEIGHT)}}