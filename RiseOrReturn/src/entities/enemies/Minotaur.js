import EnemyStateName from"../../enums/EnemyStateName.js";import Enemy from"./Enemy.js";import Direction from"../../enums/Direction.js";import Animation from"../../../lib/Animation.js";import EnemyType from"../../enums/EnemyType.js";import MinotaurStateName from"../../enums/MinotaurStateName.js";import Hitbox from"../../../lib/Hitbox.js";import BossType from"../../enums/BossType.js";import Room from"../../objects/Room.js";import{CANVAS_HEIGHT,CANVAS_WIDTH,context}from"../../globals.js";import ProgressBar from"../../objects/ProgressBar.js";import StateMachine from"../../../lib/StateMachine.js";import MinotaurCooldownState from"../../states/entity/enemy/MinotaurCooldownState.js";import MinotaurDeathState from"../../states/entity/enemy/MinotaurDeathState.js";import MinotaurSpinState from"../../states/entity/enemy/MinotaurSpinState.js";import MinotaurFollowState from"../../states/entity/enemy/MinotaurFollowState.js";export default class Minotaur extends Enemy{static SPEED=40;static WIDTH=96;static HEIGHT=96;static DAMAGE=2;static SPRITE_WIDTH=32;static SPRITE_HEIGHT=32;static HEALTH=10;constructor(t,i){super(t,i),this.speed=Minotaur.SPEED,this.damage=Minotaur.DAMAGE,this.totalHealth=Minotaur.HEALTH,this.health=this.totalHealth,this.dimensions.x=Minotaur.SPRITE_WIDTH,this.dimensions.y=Minotaur.SPRITE_HEIGHT,this.position.y=CANVAS_HEIGHT/2-Minotaur.HEIGHT/2,this.position.x=CANVAS_WIDTH/2-Minotaur.WIDTH/2,this.hitboxRegular=new Hitbox(this.dimensions.x/2+this.dimensions.x/4,this.dimensions.y/2+this.dimensions.y/4,this.dimensions.x/8,this.dimensions.y/8),this.hitboxOffsets=this.hitboxRegular,this.healthBar=new ProgressBar(CANVAS_WIDTH/2-55,10,100,5,{},this);const e={[MinotaurStateName.Idle]:{[Direction.Up]:new Animation([88,89,90],.2),[Direction.Down]:new Animation([51,52,53,52],.2),[Direction.Left]:new Animation([64,65,66],.2),[Direction.Right]:new Animation([75,76,77],.2)},[MinotaurStateName.Follow]:{[Direction.Up]:new Animation([11,12,13,14,15,16,17],.05),[Direction.Down]:new Animation([121,122,123,124,125,126,127],.05),[Direction.Left]:new Animation([121,122,123,124,125,126,127],.05),[Direction.Right]:new Animation([11,12,13,14,15,16,17],.05)},[MinotaurStateName.Cooldown]:{[Direction.Up]:new Animation([88,89,90,99,100,99,90,89,88],.2),[Direction.Down]:new Animation([198,199,200,209,210,209,200,199,198],.2),[Direction.Left]:new Animation([198,199,200,209,210,209,200,199,198],.2),[Direction.Right]:new Animation([88,89,90,99,100,99,90,89,88],.2)},[MinotaurStateName.Swing]:{[Direction.Up]:new Animation([87,88,89,88],.2),[Direction.Down]:new Animation([51,52,53,52],.2),[Direction.Left]:new Animation([63,64,65,64],.2),[Direction.Right]:new Animation([75,76,77,76],.2)},[MinotaurStateName.Spin]:{[Direction.Up]:new Animation([66,67,68,69,70,71,72,73,74],.2),[Direction.Down]:new Animation([176,177,178,179,180,181,182,183,184],.2),[Direction.Left]:new Animation([176,177,178,179,180,181,182,183,184],.2),[Direction.Right]:new Animation([66,67,68,69,70,71,72,73,74],.2)},[MinotaurStateName.Death]:{[Direction.Up]:new Animation([99,100,101,102,103,104],.5,1),[Direction.Down]:new Animation([209,210,211,212,213,214],.5,1),[Direction.Left]:new Animation([209,210,211,212,213,214],.5,1),[Direction.Right]:new Animation([99,100,101,102,103,104],.5,1)}};this.stateMachine=this.initializeStateMachine(e,BossType.Minotaur)}update(t){super.update(t)}render(t={x:0,y:0}){super.render(t),this.healthBar.render(),context.font="12px Joystix",context.fillStyle="white",context.textBaseline="middle",context.textAlign="center",context.fillText("Minotaur",CANVAS_WIDTH/2,6)}receiveDamage(t){this.health-=t,this.health>0?this.changeState(MinotaurStateName.Cooldown):this.changeState(MinotaurStateName.Death)}initializeStateMachine(t,i){const e=new StateMachine;return e.add(MinotaurStateName.Cooldown,new MinotaurCooldownState(this,t[MinotaurStateName.Cooldown])),e.add(MinotaurStateName.Death,new MinotaurDeathState(this,t[MinotaurStateName.Death])),e.add(MinotaurStateName.Spin,new MinotaurSpinState(this,t[MinotaurStateName.Spin])),e.add(MinotaurStateName.Follow,new MinotaurFollowState(this,t[MinotaurStateName.Follow],this.room.player)),e.change(MinotaurStateName.Follow),e}}